---
import Layout from '../layouts/Layout.astro';
import Hero from '../components/Hero.astro';
import ProjectCard from '../components/ProjectCard.astro';
import BlogPostCard from '../components/BlogPostCard.astro';
import { getCollection } from 'astro:content';

// Get featured projects (limit to 3)
const allProjects = await getCollection('projects', ({ data }) => {
  return import.meta.env.PROD ? !data.draft : true;
});
const featuredProjects = allProjects
  .filter(project => project.data.featured)
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
  .slice(0, 3);

// Get latest blog posts (limit to 3)
const posts = await getCollection('blog', ({ data }) => {
  return import.meta.env.PROD ? !data.draft : true;
});
const latestPosts = posts
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
  .slice(0, 3);

// Skills section data
const skills = [
  { category: 'Frontend', items: ['HTML/CSS', 'JavaScript', 'TypeScript', 'React', 'Tailwind CSS'] },
  { category: 'Backend', items: ['Node.js', 'Express', 'Python', 'Django', 'API Design'] },
  { category: 'Other', items: ['Git', 'CI/CD', 'Docker', 'AWS', 'UI/UX Design'] },
];

// Currently working on data
const currentProjects = [
  {
    title: 'Weefou App Backend',
    description: 'Building the backend infrastructure for the Weefou mobile application',
    type: 'Product Development',
    status: 'In Progress',
    icon: 'server'
  },
  {
    title: 'OwnFinance',
    description: 'Personal finance management platform helping users take control of their finances',
    type: 'SaaS Product',
    status: 'Phase 1',
    link: 'https://www.ownfinance.site/',
    icon: 'finance',
    tag: 'Build in public'
  },
  {
    title: 'Math Learning Website',
    description: 'Interactive website to learn math',
    type: 'Freelance',
    status: 'In Progress',
    icon: 'learning'
  },
  {
    title: 'Tech Consulting',
    description: 'Providing technical consulting and architecture guidance for enterprise solutions',
    type: 'Consulting',
    status: 'Ongoing',
    icon: 'consulting'
  },
  {
    title: 'Garmin Data Dashboard',
    description: 'Freelance project to monitor and visualize Garmin fitness data for users',
    type: 'Freelance',
    status: 'In Progress',
    icon: 'fitness'
  }
];
---

<Layout title="Kartik kalia - Portfolio & Blog">
  <Hero />

  <!-- Currently Working On Section -->
  <section class="py-16 bg-gray-50 dark:bg-gray-900 relative overflow-hidden">
    <!-- Animated background elements -->
    <div class="absolute inset-0 overflow-hidden">
      <div class="absolute -top-40 -right-40 w-80 h-80 bg-primary-500/10 rounded-full blur-3xl animate-pulse"></div>
      <div class="absolute -bottom-40 -left-40 w-80 h-80 bg-secondary-500/10 rounded-full blur-3xl animate-pulse" style="animation-delay: 1s;"></div>
      <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-primary-600/5 rounded-full blur-3xl"></div>
    </div>
    
    <div class="container mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
      <div class="text-center mb-12">
        <div class="inline-flex items-center gap-2 px-4 py-2 bg-primary-100 dark:bg-primary-500/10 border border-primary-200 dark:border-primary-500/20 rounded-full mb-6">
          <span class="relative flex h-2 w-2">
            <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-500 dark:bg-green-400 opacity-75"></span>
            <span class="relative inline-flex rounded-full h-2 w-2 bg-green-600 dark:bg-green-500"></span>
          </span>
          <span class="text-primary-700 dark:text-primary-300 text-sm font-medium">Currently Active</span>
        </div>
        <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-4">What I'm Working On</h2>
        <div class="h-1 w-20 bg-gradient-to-r from-primary-500 to-secondary-500 mx-auto mb-6 rounded-full"></div>
        <p class="text-lg text-gray-600 dark:text-gray-400 max-w-2xl mx-auto">
          Here's what's keeping me busy right now â€“ a mix of product development, consulting, and exciting freelance projects.
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl mx-auto">
        {currentProjects.map((project, index) => (
          <div 
            class="group relative bg-white dark:bg-gray-800/50 backdrop-blur-sm border border-gray-200 dark:border-gray-700/50 rounded-xl p-6 hover:border-primary-500/50 hover:bg-gray-50 dark:hover:bg-gray-800/80 transition-all duration-300 hover:shadow-lg hover:shadow-primary-500/10 hover:-translate-y-1"
            style={`animation-delay: ${index * 100}ms;`}
          >
            <!-- Status badge -->
            <div class="absolute top-4 right-4">
              <span class={`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${
                project.status === 'Live' 
                  ? 'bg-green-100 dark:bg-green-500/20 text-green-700 dark:text-green-400 border border-green-200 dark:border-green-500/30' 
                  : project.status === 'Ongoing'
                  ? 'bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-400 border border-blue-200 dark:border-blue-500/30'
                  : project.status === 'Phase 1'
                  ? 'bg-cyan-100 dark:bg-cyan-500/20 text-cyan-700 dark:text-cyan-400 border border-cyan-200 dark:border-cyan-500/30'
                  : 'bg-amber-100 dark:bg-amber-500/20 text-amber-700 dark:text-amber-400 border border-amber-200 dark:border-amber-500/30'
              }`}>
                {(project.status === 'Live' || project.status === 'Phase 1') && (
                  <span class="relative flex h-1.5 w-1.5">
                    <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-current opacity-75"></span>
                    <span class="relative inline-flex rounded-full h-1.5 w-1.5 bg-current"></span>
                  </span>
                )}
                {project.status}
              </span>
            </div>

            <!-- Icon -->
            <div class="w-12 h-12 rounded-lg bg-gradient-to-br from-primary-100 dark:from-primary-500/20 to-secondary-100 dark:to-secondary-500/20 border border-primary-200 dark:border-primary-500/20 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform duration-300">
              {project.icon === 'server' && (
                <svg class="w-6 h-6 text-primary-600 dark:text-primary-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"></path>
                </svg>
              )}
              {project.icon === 'finance' && (
                <svg class="w-6 h-6 text-primary-600 dark:text-primary-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
              )}
              {project.icon === 'learning' && (
                <svg class="w-6 h-6 text-primary-600 dark:text-primary-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                </svg>
              )}
              {project.icon === 'consulting' && (
                <svg class="w-6 h-6 text-primary-600 dark:text-primary-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                </svg>
              )}
              {project.icon === 'fitness' && (
                <svg class="w-6 h-6 text-primary-600 dark:text-primary-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                </svg>
              )}
            </div>

            <!-- Type label -->
            <span class="text-xs font-medium text-primary-600 dark:text-primary-400 uppercase tracking-wider">{project.type}</span>

            <!-- Title -->
            <h3 class="text-lg font-semibold text-gray-900 dark:text-white mt-2 mb-2 group-hover:text-primary-600 dark:group-hover:text-primary-300 transition-colors">
              {project.link ? (
                <a href={project.link} target="_blank" rel="noopener noreferrer" class="hover:underline inline-flex items-center gap-1">
                  {project.title}
                  <svg class="w-4 h-4 opacity-0 group-hover:opacity-100 transition-opacity" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
                  </svg>
                </a>
              ) : project.title}
            </h3>

            <!-- Description -->
            <p class="text-gray-600 dark:text-gray-400 text-sm leading-relaxed">{project.description}</p>

            <!-- Tag -->
            {project.tag && (
              <div class="mt-3">
                <span class="inline-flex items-center gap-1 px-2 py-1 bg-purple-100 dark:bg-purple-500/20 text-purple-700 dark:text-purple-300 border border-purple-200 dark:border-purple-500/30 rounded-full text-xs font-medium">
                  <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 20l4-16m2 16l4-16M6 9h14M4 15h14"></path>
                  </svg>
                  {project.tag}
                </span>
              </div>
            )}
          </div>
        ))}
      </div>
    </div>
  </section>
  
  <!-- About Section -->
  <section class="py-16 bg-gray-50 dark:bg-gray-800">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="max-w-4xl mx-auto">
        <div class="text-center mb-12">
          <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-4">About Me</h2>
          <div class="h-1 w-20 bg-primary-500 mx-auto mb-6 rounded-full"></div>
        </div>
        
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
          <div>
            <h3 class="text-2xl font-semibold text-gray-900 dark:text-white mb-4">Full-Stack Developer</h3>
            <p class="text-lg text-gray-700 dark:text-gray-300 mb-6">
              I'm a passionate full-stack developer with expertise in modern web technologies. 
              I love building scalable applications and solving complex problems through clean, 
              maintainable code.
            </p>
            <p class="text-lg text-gray-700 dark:text-gray-300 mb-8">
              With experience in both frontend and backend development, I create seamless 
              user experiences and robust server-side solutions. I'm always learning and 
              exploring new technologies to stay current with industry best practices.
            </p>
            <a 
              href="/about" 
              class="inline-flex items-center px-6 py-3 bg-primary-600 text-white font-medium rounded-md hover:bg-primary-700 transition-colors"
            >
              Learn More
              <svg class="ml-2 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
              </svg>
            </a>
          </div>
          
          <div class="grid grid-cols-2 gap-4">
            {skills.map(skill => (
              <div class="bg-white dark:bg-gray-700 p-6 rounded-lg shadow-md">
                <h4 class="text-lg font-semibold text-gray-900 dark:text-white mb-3">{skill.category}</h4>
                <div class="flex flex-wrap gap-2">
                  {skill.items.map(item => (
                    <span class="bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300 text-xs px-2.5 py-1 rounded-full">
                      {item}
                    </span>
                  ))}
                </div>
              </div>
            ))}
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Featured Projects Section -->
  <section class="py-16 bg-white dark:bg-gray-900">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-4">Featured Projects</h2>
        <div class="h-1 w-20 bg-primary-500 mx-auto mb-6 rounded-full"></div>
        <p class="text-lg text-gray-700 dark:text-gray-300 max-w-2xl mx-auto">
          Check out some of my recent work. These projects showcase my skills and approach to solving problems.
        </p>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {featuredProjects.length > 0 ? (
          featuredProjects.map(project => (
            <ProjectCard
              title={project.data.title}
              description={project.data.description}
              image={project.data.image}
              tags={project.data.tags}
              link={project.data.link}
              github={project.data.github}
              carousel={project.data.carousel}
            />
          ))
        ) : (
          [1, 2, 3].map(i => (
            <ProjectCard
              title={`Project ${i}`}
              description="This is a sample project description. Replace this with your actual project details once you have created some projects."
              tags={['Sample', 'Project']}
              link="#"
              github="#"
            />
          ))
        )}
      </div>
      
      <div class="text-center mt-12">
        <a 
          href="/portfolio" 
          class="inline-flex items-center px-6 py-3 bg-primary-600 text-white font-medium rounded-md hover:bg-primary-700 transition-colors"
        >
          View All Projects
          <svg class="ml-2 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
          </svg>
        </a>
      </div>
          </div>
    </section>

  <!-- Testimonials Section -->
  <section class="py-16 bg-gray-50 dark:bg-gray-800">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-4">What Colleagues Say</h2>
        <div class="h-1 w-20 bg-primary-500 mx-auto mb-6 rounded-full"></div>
        <p class="text-lg text-gray-700 dark:text-gray-300 max-w-2xl mx-auto">
          Here's what my colleagues and clients have to say about working with me.
        </p>
      </div>
      
      <div class="max-w-6xl mx-auto">
        <ul class="grid grid-cols-1 md:grid-cols-2 gap-8">
          <li class="bg-white dark:bg-gray-700 p-6 rounded-lg shadow-md">
            <div class="flex items-start space-x-4">
              <img src="/reviews/linkedin/1682076136339.jpeg" alt="Munish Shukla" class="w-16 h-16 rounded-full object-cover flex-shrink-0">
              <div class="flex-1">
                <p class="text-gray-700 dark:text-gray-300 leading-relaxed">
                  <strong class="text-gray-900 dark:text-white">Munish Shukla</strong> I had the pleasure of working closely with Kartik Kalia for a significant duration during their time as a Full Stack Developer in our team. Kartik's dedication, enthusiasm, and aptitude for development were truly commendable.

                  Throughout our collaboration, Kartik consistently exhibited a strong grasp of both frontend and backend technologies, demonstrating versatility in their skill set. Their ability to quickly understand complex concepts and translate them into practical solutions was impressive. Whether it was tackling intricate coding challenges or contributing creatively to UI/UX discussions, Kartik's insights were invaluable.
                  
                  Best wishes for your future endeavors, Kartik!
                </p>
              </div>
            </div>
          </li>
          
          <li class="bg-white dark:bg-gray-700 p-6 rounded-lg shadow-md">
            <div class="flex items-start space-x-4">
              <img src="/reviews/linkedin/1727286305977.jpeg" alt="Ashish Rawat" class="w-16 h-16 rounded-full object-cover flex-shrink-0">
              <div class="flex-1">
                <p class="text-gray-700 dark:text-gray-300 leading-relaxed">
                  <strong class="text-gray-900 dark:text-white">Amit Chakraborty</strong> I have been working with Kartik for almost two years. He is a good backend developer, good mentor, great lead and good supporting team member. Working with him gave me a lot of backend learning opportunities, and also as a team we solved a lot of problems. As a person and as a team he is very responsible and anyone can rely on him without hesitation.
                </p>
              </div>
            </div>
          </li>
          
          <li class="bg-white dark:bg-gray-700 p-6 rounded-lg shadow-md">
            <div class="flex items-start space-x-4">
              <img src="/reviews/linkedin/1630477467475.jpeg" alt="Ashish Rawat" class="w-16 h-16 rounded-full object-cover flex-shrink-0">
              <div class="flex-1">
                <p class="text-gray-700 dark:text-gray-300 leading-relaxed">
                  <strong class="text-gray-900 dark:text-white">Ashish Rawat</strong> Well I used to work with Kartik and i have to say he is one of those go to tech wizard if you get stuck somewhere while solving a problem. He is always there to help the team members around and also other people as well.
                </p>
              </div>
            </div>
          </li>
          
          <li class="bg-white dark:bg-gray-700 p-6 rounded-lg shadow-md">
            <div class="flex items-start space-x-4">
              <img src="/reviews/linkedin/1679238801521.jpeg" alt="Mitendra Nathani" class="w-16 h-16 rounded-full object-cover flex-shrink-0">
              <div class="flex-1">
                <p class="text-gray-700 dark:text-gray-300 leading-relaxed">
                  <strong class="text-gray-900 dark:text-white">Mitendra Nathani</strong> Kartik's expertise in Node.js programming has been instrumental in delivering high-quality and efficient solutions for our projects. He consistently demonstrate a deep understanding of the technology, ensuring our applications are well-structured, scalable, and performant. I have full confidence in his abilities to continue delivering excellent results in future projects.
                </p>
              </div>
            </div>
          </li>
        </ul>
      </div>
    </div>
  </section>

  <!-- Latest Blog Posts Section -->
  <section class="py-16 bg-gray-50 dark:bg-gray-800">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-4">Latest Blog Posts</h2>
        <div class="h-1 w-20 bg-primary-500 mx-auto mb-6 rounded-full"></div>
        <p class="text-lg text-gray-700 dark:text-gray-300 max-w-2xl mx-auto">
          Read my latest thoughts on web development, technology, and industry insights.
        </p>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {latestPosts.length > 0 ? (
          latestPosts.map(post => (
            <BlogPostCard
              title={post.data.title}
              description={post.data.description}
              pubDate={post.data.pubDate}
              heroImage={post.data.heroImage}
              tags={post.data.tags}
              url={post.url}
              author={post.data.author}
            />
          ))
        ) : (
          [1, 2, 3].map(i => (
            <BlogPostCard
              title={`Sample Blog Post ${i}`}
              description="This is a sample blog post description. Replace this with your actual blog posts once you have created some content."
              pubDate={new Date()}
              tags={['Sample', 'Blog']}
              url="#"
              author="Your Name"
            />
          ))
        )}
      </div>
      
      <div class="text-center mt-12">
        <a 
          href="/blog" 
          class="inline-flex items-center px-6 py-3 bg-primary-600 text-white font-medium rounded-md hover:bg-primary-700 transition-colors"
        >
          Read All Posts
          <svg class="ml-2 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
          </svg>
        </a>
      </div>
    </div>
  </section>

  <!-- Contact CTA Section -->
  <section class="py-16 bg-white dark:bg-gray-900">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="max-w-3xl mx-auto text-center">
        <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-4">Let's Work Together</h2>
        <div class="h-1 w-20 bg-primary-500 mx-auto mb-6 rounded-full"></div>
        <p class="text-lg text-gray-700 dark:text-gray-300 mb-8">
          I'm always interested in new opportunities and exciting projects. 
          Whether you have a question or just want to say hi, feel free to reach out!
        </p>
        <a 
          href="/contact" 
          class="inline-flex items-center px-8 py-4 bg-primary-600 text-white font-medium rounded-md hover:bg-primary-700 transition-colors text-lg"
        >
          Get In Touch
          <svg class="ml-2 w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
          </svg>
        </a>
      </div>
    </div>
  </section>
</Layout>